var jsadmin=function($,t,e){var a=[function($){jQuery(t).ajaxSuccess(function(t,e,a){a.data&&a.data.includes("action=add-tag")===!0&&(jQuery("#addtag")[0].reset(),$.textCounter(),$.wordCounter(),$("#seo-preview").setupSEOPreview(),$(".image-upload-wrapper").resetImageUpload(),$(".gmap-form").resetGmapForm()),a.data&&a.data.includes("action=save-widget")===!0&&mediaupload.init()}),$("a[data-toggle=tab]").click(function(){var t="#"+$(this).attr("aria-controls"),e=$(this).closest(".tab-menu");$(e).find("li").removeClass("active"),$(this).parent().addClass("active"),$(t).closest(".tab-panel").find(".tab").removeClass("active"),$(t).addClass("active")});var a=function(){$("[data-toggle=form-description]").click(function(t){var e=$(this).data("target");$("#"+e).parent().toggleClass("open"),t.preventDefault()})};a(),$.textCounter=function(){$("input.text-counter, textarea.text-counter").each(function(){var t=$(this).attr("data-max"),e=$(this).closest("tr, div.widget-form, div.form-table").find("label cite");e.removeAttr("style"),e.html("("+$(this).val().length+")"),$(this).val().length>t&&e.css({color:"#dc3232"}),$(this).keyup(function(){$(this).val().length>t?e.css({color:"#dc3232"}):e.css({color:"#03ab17"}),e.html("("+$(this).val().length+")")})})},$.textCounter(),$.wordCounter=function(){$("input.word-counter, textarea.word-counter, input.key-counter, textarea.key-counter").each(function(){var t="",e=$(this).attr("data-max"),a=$(this).closest("tr, div.widget-form, div.form-table").find("label cite");a.removeAttr("style"),t=$(this).hasClass("key-counter")?""===$(this).val()?0:$(this).val().split(",").length:""===$(this).val()?0:$(this).val().split(" ").length,a.html("("+t+")"),t>e&&a.css({color:"#dc3232"}),$(this).keyup(function(){t=$(this).hasClass("key-counter")?""===$(this).val()?0:$(this).val().split(",").length:""===$(this).val()?0:$(this).val().split(" ").length,t>e?a.css({color:"#dc3232"}):a.css({color:"#03ab17"}),a.html("("+t+")")})})},$.wordCounter(),$.fn.createGooglePreview=function(t,e,a,i,n,s,r){$(this).getUrlAlias(),$(this).getPreviewTitle(t,e,a,i,n,s),$(this).getPreviewDescription(t,e,r)},$.fn.getUrlAlias=function(){var t=$(this).attr("data-alias"),e=$(this).attr("data-domain");e.length+t.length>68?$("div.seo-url cite",this).html(e+"/.."+t):$("div.seo-url cite",this).html(e+t),$("div.seo-url cite",this).attr("title",e+t)},$.fn.getPreviewTitle=function(t,e,a,i,n,s){var r=" - ",o=$(this).attr("data-company"),l=$(this).attr("data-tagline"),c=$(e).find('input[name="'+a+'"]').val(),d=$(e).find('input[name="'+t+"_"+s+'"]').val();switch(i=$(e).find('select[name="'+t+"_"+i+'"]').length>0?parseInt($(e).find('select[name="'+t+"_"+i+'"]').val()):$(this).data("format-style"),n=$(e).find('select[name="'+t+"_"+n+'"]').length>0?parseInt($(e).find('select[name="'+t+"_"+n+'"]').val()):$(this).data("separator-style")){case 1:r=" - ";break;case 2:r=" | ";break;case 3:r=", ";break;case 4:r=" > ";break;case 5:r=" ";break;default:r=" - "}switch(c=""===c?c:r+c,o=""===o?o:r+o,d=""===d?d:r+d,l=""===l?l:r+l,i){case 1:a=c+o;break;case 2:a=c+o+d;break;case 3:a=c+d;break;case 4:a=c+d+o;break;case 5:a=o+c;break;case 6:a=o+c+d;break;case 7:a=o+d;break;case 8:a=o+d+c;break;case 9:a=d+c;break;case 10:a=d+c+o;break;case 11:a=d+o;break;case 12:a=d+o+c;break;case 13:a=o+l;break;case 14:a=o+l+c;break;case 15:a=o+l+d;break;case 16:a=o;break;case 17:a=c;break;case 18:a=d;break;default:a=c+o}a.substr(0,r.length)===r&&(a=a.substr(r.length,a.length-r.length)),$("div.seo-title",this).attr("title",a),a.length>70?(a=a.substr(0,66),$("div.seo-title",this).html(a+"...")):$("div.seo-title",this).html(a)},$.fn.getPreviewDescription=function(t,e,a){a=$(e).find('textarea[name="'+t+"_"+a+'"]').val(),void 0!==a&&(a.length>150?(a=a.substr(0,150),$("div.seo-description",this).html(a+"...")):$("div.seo-description",this).html(a))},$.fn.setupSEOPreview=function(){$(this).each(function(){var t=$(this).attr("data-form"),e=$(this).attr("data-theme"),a=$(this).attr("data-title"),i=$(this).attr("data-format"),n=$(this).attr("data-separator"),s=$(this).attr("data-expanded"),r=$(this).attr("data-description");$(t).find('input[name="'+a+'"]').keyup(function(){$("#seo-preview").createGooglePreview(e,t,a,i,n,s,r)}),$(t).find('select[name="'+e+"_"+i+'"]').change(function(){$("#seo-preview").createGooglePreview(e,t,a,i,n,s,r)}),$(t).find('select[name="'+e+"_"+n+'"]').change(function(){$("#seo-preview").createGooglePreview(e,t,a,i,n,s,r)}),$(t).find('input[name="'+e+"_"+s+'"]').keyup(function(){$("#seo-preview").createGooglePreview(e,t,a,i,n,s,r)}),$(t).find('textarea[name="'+e+"_"+r+'"]').keyup(function(){$("#seo-preview").createGooglePreview(e,t,a,i,n,s,r)}),$(this).createGooglePreview(e,t,a,i,n,s,r)})},$("#seo-preview").setupSEOPreview(),$(".color-picker").each(function(){var e=$(this).attr("data-field"),a=$("#"+e+"-field"),i=$("#"+e+"-field").val(),n=$("#"+e+"-example"),s=$("#"+e+"-default"),r=$(this).siblings(".color-picker-box"),o=$.farbtastic(r);o.setColor(i),o.linkTo(function(t){$(n).css({"background-color":t}),$(a).val(t)}),$(a).keyup(function(){var t=$(this).val(),e=t;t=t.replace(/[^a-fA-F0-9]/,""),"#"+t!==e&&$(this).val(t),3!==t.length&&6!==t.length||(o.setColor("#"+t),$(this).val("#"+t),$(n).css({"background-color":"#"+t}))}),$(s).click(function(t){var e=$("a",this).html();$(a).val(e),$(n).css({"background-color":e}),o.setColor(e),t.preventDefault()}),$(this).click(function(t){var a=$("#"+e+"-field").position(),i=$("#"+e+"-field").outerWidth()+9;r.css({position:"absolute",left:a.left+i,top:a.top+24}),r.show(),t.preventDefault()}),$(t).mousedown(function(){$(".color-picker-box").hide()})}),$.fn.enhanceSelect=function(){var t="",e="",a=$(this).attr("id");$(this).find("option").each(function(){"0"!==$(this).val()&&($(this).attr("selected")?e=e+'<option value="'+$(this).attr("value")+'" title="'+$(this).attr("title")+'">'+$(this).text()+"</option>":t=t+'<option value="'+$(this).attr("value")+'" title="'+$(this).attr("title")+'">'+$(this).text()+"</option>")}),$("#"+a+"-enhance-left").empty(),$("#"+a+"-enhance-right").empty(),$("#"+a+"-enhance-left").append(t),$("#"+a+"-enhance-right").append(e)},$.fn.initSelect=function(){$(this).each(function(){$(".conceal select",this).enhanceSelect()}),$(".select-left",this).click(function(){var t=$(this).attr("data-id");$("#"+t+"-enhance-left").find("option:selected").each(function(){$("#"+t).find('option[value="'+$(this).val()+'"]').attr("selected","selected")}),$("#"+t+"-enhance-left").find("option:selected").remove().appendTo($("#"+t+"-enhance-right"))}),$(".select-right",this).click(function(){var t=$(this).attr("data-id");$("#"+t+"-enhance-right").find("option:selected").each(function(){$("#"+t).find('option[value="'+$(this).val()+'"]').removeAttr("selected")}),$("#"+t+"-enhance-right").find("option:selected").remove().appendTo($("#"+t+"-enhance-left")),0===$("#"+t+"-enhance-right").length&&$("#"+t).find('option[value="0"]').attr("selected","selected")})},$(".enhance-select").initSelect(),$("a.add-matrix").live("click",function(){var t=$(this).attr("data-table"),e="."+t,a=$(e).attr("data-columns"),i=$(e).attr("data-labels");i?$("tr",e).eq(1).clone().insertAfter($("tr",e).eq($("tr",e).length-2)).find("input").val("").prop("checked",!1):$("tr",e).eq(0).clone().insertAfter($("tr",e).eq($("tr",e).length-2)).find("input").val("").prop("checked",!1),$("input:text",e).each(function(e){var i=$(this).closest("tr").index()-1,n=e%a;$(this).attr("name",t+"["+i+"]["+n+"]")})}),$("a.remove-matrix").live("click",function(){var t="."+$(this).attr("data-table");$("tr",t).length>=4?$("tr",t).eq($("tr",t).length-2).remove():$("tr.matrix-row",t).find("input").val("")}),$.fn.resetGmapForm=function(){$(this).find("input").val("")},$.fn.resetImageUpload=function(){$(this).find(".image-upload").slice(1).remove(),$(".image-upload",this).find('input[type="hidden"]').val(""),$(".image-upload",this).find(".regular-text").attr("type","text"),$(".image-upload",this).find(".image-preview").find("a").html(""),$(".image-upload",this).find(".image-display").addClass("hidden"),$(".image-upload",this).find(".edit-image-action").addClass("hidden"),$(".image-upload",this).find(".upload-image-action").removeClass("hidden")},$("input.action-button").click(function(){var t=!0,a=$(this).attr("data-feedback");return!!(t=a?e.confirm(decodeURI(a)):t)&&void $(this).siblings('input[type="hidden"]').val(!0)})}],i=function(){n($,t,e)},n=function($,t,e){a.forEach(function(a){a($,t,e)})};return{init:i}}(jQuery,document,window);jsadmin.init();